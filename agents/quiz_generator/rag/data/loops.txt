ё# ЦИКЛЫ В ЯЗЫКЕ C - ПОЛНОЕ РУКОВОДСТВО

## 1. ОСНОВЫ ЦИКЛОВ

### Что такое цикл
Цикл — это конструкция управления потоком, которая позволяет повторить блок кода несколько раз. Циклы необходимы для автоматизации повторяющихся задач.

### Типы циклов в C
В C существует три основных типа циклов:
1. **for** — когда известно количество итераций
2. **while** — когда количество итераций неизвестно
3. **do...while** — цикл, выполняющийся минимум один раз

### Элементы цикла
```c
// Инициализация: начальное значение счётчика
// Условие: проверяется перед каждой итерацией
// Изменение: изменение счётчика после каждой итерации
// Тело цикла: код, который повторяется

for (int i = 0; i < 5; i++) {
    printf("%d\n", i);
}
// Инициализация: int i = 0
// Условие: i < 5
// Изменение: i++
// Тело: printf("%d\n", i);
```

## 2. ЦИКЛ FOR

### Базовый синтаксис for
```c
#include <stdio.h>

// Основная форма цикла for
for (инициализация; условие; изменение) {
    // Тело цикла
}

// Пример: вывод чисел от 0 до 4
for (int i = 0; i < 5; i++) {
    printf("%d\n", i);
}
// Вывод:
// 0
// 1
// 2
// 3
// 4
```

### Порядок выполнения for
```c
#include <stdio.h>

int main() {
    for (int i = 0; i < 3; i++) {
        printf("i = %d\n", i);
    }
    return 0;
}

// Порядок выполнения:
// 1. Инициализация: int i = 0
// 2. Проверка условия: 0 < 3? ДА
// 3. Выполнение тела: printf("i = 0\n");
// 4. Изменение: i++  (теперь i = 1)
// 5. Проверка условия: 1 < 3? ДА
// 6. Выполнение тела: printf("i = 1\n");
// 7. Изменение: i++  (теперь i = 2)
// 8. Проверка условия: 2 < 3? ДА
// 9. Выполнение тела: printf("i = 2\n");
// 10. Изменение: i++  (теперь i = 3)
// 11. Проверка условия: 3 < 3? НЕТ
// 12. Выход из цикла
```

### Варианты for
```c
#include <stdio.h>

// Цикл с разным шагом
for (int i = 0; i <= 10; i += 2) {
    printf("%d ", i);  // 0 2 4 6 8 10
}
printf("\n");

// Цикл в обратном порядке
for (int i = 5; i > 0; i--) {
    printf("%d ", i);  // 5 4 3 2 1
}
printf("\n");

// Цикл с несколькими переменными
for (int i = 0, j = 10; i < 5; i++, j--) {
    printf("i=%d, j=%d\n", i, j);
}

// Цикл без инициализации (переменная объявлена снаружи)
int counter = 0;
for (; counter < 3; counter++) {
    printf("%d\n", counter);
}

// Цикл без изменения (управляется внутри тела)
for (int i = 0; i < 5; ) {
    printf("%d\n", i);
    i += 2;
}

// Бесконечный цикл (опасно!)
// for (;;) {
//     printf("Бесконечно\n");
// }
```

### Сумма чисел с for
```c
#include <stdio.h>

int main() {
    int sum = 0;
    for (int i = 1; i <= 5; i++) {
        sum += i;
    }
    printf("Сумма чисел от 1 до 5: %d\n", sum);  // 15
    return 0;
}
```

### Произведение чисел с for
```c
#include <stdio.h>

int main() {
    int product = 1;
    for (int i = 1; i <= 5; i++) {
        product *= i;  // 1 * 1 * 2 * 3 * 4 * 5 = 120
    }
    printf("5! = %d\n", product);  // 120
    return 0;
}
```

### Таблица умножения
```c
#include <stdio.h>

int main() {
    for (int i = 1; i <= 10; i++) {
        for (int j = 1; j <= 10; j++) {
            printf("%3d ", i * j);
        }
        printf("\n");
    }
    return 0;
}
```

### Вложенные циклы for
```c
#include <stdio.h>

int main() {
    // Выведет квадрат из звёздочек 5x5
    for (int i = 0; i < 5; i++) {
        for (int j = 0; j < 5; j++) {
            printf("* ");
        }
        printf("\n");
    }
    return 0;
}

// Вывод:
// * * * * *
// * * * * *
// * * * * *
// * * * * *
// * * * * *
```

### Цикл по массиву
```c
#include <stdio.h>

int main() {
    int arr[] = {10, 20, 30, 40, 50};

    // Проход по массиву с for
    for (int i = 0; i < 5; i++) {
        printf("arr[%d] = %d\n", i, arr[i]);
    }

    // Альтернатива: использование sizeof
    int n = sizeof(arr) / sizeof(arr[0]);  // n = 5
    for (int i = 0; i < n; i++) {
        printf("%d ", arr[i]);
    }
    printf("\n");

    return 0;
}
```

## 3. ЦИКЛ WHILE

### Базовый синтаксис while
```c
#include <stdio.h>

// Синтаксис:
// while (условие) {
//     // Тело цикла
// }

// Пример: вывод чисел от 0 до 4
int i = 0;
while (i < 5) {
    printf("%d\n", i);
    i++;
}

// Вывод:
// 0
// 1
// 2
// 3
// 4
```

### Порядок выполнения while
```c
#include <stdio.h>

int main() {
    int i = 0;
    while (i < 3) {
        printf("i = %d\n", i);
        i++;
    }
    return 0;
}

// Порядок выполнения:
// 1. Проверка условия: 0 < 3? ДА
// 2. Выполнение тела: printf("i = 0\n");
// 3. Изменение: i++  (теперь i = 1)
// 4. Проверка условия: 1 < 3? ДА
// 5. Выполнение тела: printf("i = 1\n");
// 6. Изменение: i++  (теперь i = 2)
// 7. Проверка условия: 2 < 3? ДА
// 8. Выполнение тела: printf("i = 2\n");
// 9. Изменение: i++  (теперь i = 3)
// 10. Проверка условия: 3 < 3? НЕТ
// 11. Выход из цикла
```

### While vs For
```c
#include <stdio.h>

// Эти две конструкции эквивалентны:

// Вариант 1: for
for (int i = 0; i < 5; i++) {
    printf("%d ", i);
}

// Вариант 2: while
int i = 0;
while (i < 5) {
    printf("%d ", i);
    i++;
}

// Обе выведут: 0 1 2 3 4
```

### Чтение данных с while
```c
#include <stdio.h>

int main() {
    int num;

    // Читаем числа до тех пор, пока не введут 0
    while (scanf("%d", &num) == 1 && num != 0) {
        printf("Вы ввели: %d\n", num);
    }

    printf("Выход\n");
    return 0;
}
```

### Подсчёт цифр в числе
```c
#include <stdio.h>

int main() {
    int num = 12345;
    int count = 0;

    while (num > 0) {
        count++;
        num /= 10;  // Удаляем последнюю цифру
    }

    printf("Количество цифр: %d\n", count);  // 5
    return 0;
}
```

### Реверс числа
```c
#include <stdio.h>

int main() {
    int num = 12345;
    int reversed = 0;

    while (num > 0) {
        int digit = num % 10;
        reversed = reversed * 10 + digit;
        num /= 10;
    }

    printf("Реверс: %d\n", reversed);  // 54321
    return 0;
}
```

### Проверка суммы цифр
```c
#include <stdio.h>

int main() {
    int num = 12345;
    int sum = 0;

    while (num > 0) {
        sum += num % 10;  // Добавляем последнюю цифру
        num /= 10;
    }

    printf("Сумма цифр: %d\n", sum);  // 1+2+3+4+5 = 15
    return 0;
}
```

## 4. ЦИКЛ DO...WHILE

### Базовый синтаксис do...while
```c
#include <stdio.h>

// Синтаксис:
// do {
//     // Тело цикла
// } while (условие);

// ⚠️ ВАЖНО: Тело выполняется МИНИМУМ один раз!

int i = 0;
do {
    printf("%d\n", i);
    i++;
} while (i < 5);

// Вывод:
// 0
// 1
// 2
// 3
// 4
```

### Разница между while и do...while
```c
#include <stdio.h>

int main() {
    // Цикл while (не выполнится, так как условие ложно сразу)
    int i = 10;
    while (i < 5) {
        printf("while: %d\n", i);  // Не выведется!
        i++;
    }

    // Цикл do...while (выполнится минимум один раз)
    int j = 10;
    do {
        printf("do...while: %d\n", j);  // Выведется один раз: 10
        j++;
    } while (j < 5);

    return 0;
}
```

### Меню с do...while
```c
#include <stdio.h>

int main() {
    int choice;

    do {
        printf("\n=== МЕНЮ ===\n");
        printf("1. Вариант 1\n");
        printf("2. Вариант 2\n");
        printf("3. Выход\n");
        printf("Выберите: ");
        scanf("%d", &choice);

        switch (choice) {
            case 1:
                printf("Вы выбрали вариант 1\n");
                break;
            case 2:
                printf("Вы выбрали вариант 2\n");
                break;
            case 3:
                printf("До свидания!\n");
                break;
            default:
                printf("Неправильный выбор\n");
        }
    } while (choice != 3);

    return 0;
}
```

### Валидация ввода
```c
#include <stdio.h>

int main() {
    int age;

    do {
        printf("Введите ваш возраст (1-120): ");
        scanf("%d", &age);

        if (age < 1 || age > 120) {
            printf("Ошибка! Возраст должен быть от 1 до 120\n");
        }
    } while (age < 1 || age > 120);

    printf("Ваш возраст: %d\n", age);
    return 0;
}
```

### Игра "угадай число"
```c
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    srand(time(NULL));
    int secret = rand() % 100 + 1;  // Число от 1 до 100
    int guess = 0;
    int attempts = 0;

    do {
        printf("Угадайте число (1-100): ");
        scanf("%d", &guess);
        attempts++;

        if (guess < secret) {
            printf("Число больше!\n");
        } else if (guess > secret) {
            printf("Число меньше!\n");
        }
    } while (guess != secret);

    printf("Вы угадали! Число попыток: %d\n", attempts);
    return 0;
}
```

## 5. УПРАВЛЕНИЕ ЦИКЛАМИ

### Оператор break
```c
#include <stdio.h>

int main() {
    // break выходит из цикла полностью
    for (int i = 0; i < 10; i++) {
        if (i == 5) {
            break;  // Выход из цикла
        }
        printf("%d ", i);
    }
    printf("\n");  // Вывод: 0 1 2 3 4

    return 0;
}
```

### Поиск элемента с break
```c
#include <stdio.h>

int main() {
    int arr[] = {10, 20, 30, 40, 50};
    int target = 30;
    int found = 0;

    for (int i = 0; i < 5; i++) {
        if (arr[i] == target) {
            printf("Элемент найден на позиции %d\n", i);
            found = 1;
            break;  // Прекращаем поиск
        }
    }

    if (!found) {
        printf("Элемент не найден\n");
    }

    return 0;
}
```

### Оператор continue
```c
#include <stdio.h>

int main() {
    // continue пропускает текущую итерацию
    for (int i = 0; i < 10; i++) {
        if (i % 2 == 0) {
            continue;  // Пропускаем чётные числа
        }
        printf("%d ", i);
    }
    printf("\n");  // Вывод: 1 3 5 7 9

    return 0;
}
```

### Пропуск нежелательных значений
```c
#include <stdio.h>

int main() {
    for (int i = 1; i <= 10; i++) {
        if (i == 5 || i == 7) {
            continue;  // Пропускаем 5 и 7
        }
        printf("%d ", i);
    }
    printf("\n");  // Вывод: 1 2 3 4 6 8 9 10

    return 0;
}
```

### Оператор goto (избегать!)
```c
// ⚠️ goto считается плохой практикой!

#include <stdio.h>

int main() {
    for (int i = 0; i < 5; i++) {
        if (i == 2) {
            goto exit_loop;  // Прыгаем на метку
        }
        printf("%d\n", i);
    }

    exit_loop:
    printf("Выход из цикла\n");
    return 0;
}

// ❌ Используйте break вместо goto!
```

## 6. ПРАКТИЧЕСКИЕ ПРИМЕРЫ

### Пример 1: Таблица умножения
```c
#include <stdio.h>

int main() {
    printf("Таблица умножения\n\n");

    for (int i = 1; i <= 10; i++) {
        for (int j = 1; j <= 10; j++) {
            printf("%3d ", i * j);
        }
        printf("\n");
    }

    return 0;
}
```

### Пример 2: Сумма всех нечётных чисел до N
```c
#include <stdio.h>

int main() {
    int n = 50;
    int sum = 0;

    for (int i = 1; i < n; i += 2) {
        sum += i;
    }

    printf("Сумма нечётных чисел до %d: %d\n", n, sum);
    return 0;
}
```

### Пример 3: Пирамида из звёздочек
```c
#include <stdio.h>

int main() {
    int rows = 5;

    for (int i = 1; i <= rows; i++) {
        for (int j = 0; j < i; j++) {
            printf("* ");
        }
        printf("\n");
    }

    return 0;
}

// Вывод:
// *
// * *
// * * *
// * * * *
// * * * * *
```

### Пример 4: Проверка на простое число
```c
#include <stdio.h>

int main() {
    int num = 17;
    int isPrime = 1;

    if (num <= 1) {
        isPrime = 0;
    } else if (num <= 3) {
        isPrime = 1;
    } else if (num % 2 == 0 || num % 3 == 0) {
        isPrime = 0;
    } else {
        for (int i = 5; i * i <= num; i += 6) {
            if (num % i == 0 || num % (i + 2) == 0) {
                isPrime = 0;
                break;
            }
        }
    }

    if (isPrime) {
        printf("%d — простое число\n", num);
    } else {
        printf("%d — составное число\n", num);
    }

    return 0;
}
```

### Пример 5: Самолёт из звёздочек
```c
#include <stdio.h>

int main() {
    for (int i = 1; i <= 5; i++) {
        // Пробелы
        for (int j = 5; j > i; j--) {
            printf(" ");
        }
        // Звёздочки
        for (int j = 0; j < i; j++) {
            printf("* ");
        }
        printf("\n");
    }

    return 0;
}

// Вывод:
//     *
//    * *
//   * * *
//  * * * *
// * * * * *
```

### Пример 6: Факториал
```c
#include <stdio.h>

int main() {
    int num = 5;
    int factorial = 1;

    for (int i = 1; i <= num; i++) {
        factorial *= i;
    }

    printf("%d! = %d\n", num, factorial);  // 5! = 120
    return 0;
}
```

### Пример 7: Среднее значение N чисел
```c
#include <stdio.h>

int main() {
    int n;
    printf("Введите количество чисел: ");
    scanf("%d", &n);

    int sum = 0;
    for (int i = 0; i < n; i++) {
        int num;
        printf("Число %d: ", i + 1);
        scanf("%d", &num);
        sum += num;
    }

    float average = (float)sum / n;
    printf("Среднее значение: %.2f\n", average);

    return 0;
}
```

### Пример 8: Поиск максимума
```c
#include <stdio.h>

int main() {
    int arr[] = {15, 5, 42, 12, 33, 7, 28};
    int n = 7;
    int max = arr[0];

    for (int i = 1; i < n; i++) {
        if (arr[i] > max) {
            max = arr[i];
        }
    }

    printf("Максимальное значение: %d\n", max);
    return 0;
}
```

## 7. ТИПИЧНЫЕ ОШИБКИ С ЦИКЛАМИ

### Ошибка 1: Бесконечный цикл
```c
// ❌ НЕПРАВИЛЬНО: условие никогда не станет ложным
int i = 0;
while (i < 5) {
    printf("%d\n", i);
    // i++ забыли!
}

// ✅ ПРАВИЛЬНО:
int i = 0;
while (i < 5) {
    printf("%d\n", i);
    i++;
}
```

### Ошибка 2: Ошибка off-by-one
```c
// ❌ НЕПРАВИЛЬНО: выходит за границы массива
int arr[5] = {1, 2, 3, 4, 5};
for (int i = 0; i <= 5; i++) {  // i <= 5 неправильно!
    printf("%d\n", arr[i]);     // arr[5] — выход за границы!
}

// ✅ ПРАВИЛЬНО:
int arr[5] = {1, 2, 3, 4, 5};
for (int i = 0; i < 5; i++) {   // i < 5 правильно
    printf("%d\n", arr[i]);
}
```

### Ошибка 3: Неправильное условие выхода
```c
// ❌ НЕПРАВИЛЬНО:
for (int i = 0; i < 10; i++) {
    if (i = 5) {  // = вместо ==!
        break;
    }
}

// ✅ ПРАВИЛЬНО:
for (int i = 0; i < 10; i++) {
    if (i == 5) {  // Правильное сравнение
        break;
    }
}
```

### Ошибка 4: Изменение счётчика внутри цикла
```c
// ⚠️ Опасно:
for (int i = 0; i < 10; i++) {
    printf("%d\n", i);
    i += 2;  // Изменяем счётчик (может привести к ошибкам)
}

// ✅ Лучше:
for (int i = 0; i < 10; i += 2) {
    printf("%d\n", i);
}
```

### Ошибка 5: Забыли обновить переменную
```c
// ❌ НЕПРАВИЛЬНО: j не обновляется
int j = 0;
for (int i = 0; i < 5; i++) {
    printf("j = %d\n", j);  // Всегда 0
}

// ✅ ПРАВИЛЬНО:
int j = 0;
for (int i = 0; i < 5; i++) {
    printf("j = %d\n", j);
    j++;  // Обновляем j
}
```

## 8. ВЛОЖЕННЫЕ ЦИКЛЫ

### Базовые вложенные циклы
```c
#include <stdio.h>

int main() {
    for (int i = 1; i <= 3; i++) {
        printf("Внешний цикл: i = %d\n", i);

        for (int j = 1; j <= 3; j++) {
            printf("  Внутренний цикл: j = %d\n", j);
        }
    }

    return 0;
}

// Вывод:
// Внешний цикл: i = 1
//   Внутренний цикл: j = 1
//   Внутренний цикл: j = 2
//   Внутренний цикл: j = 3
// Внешний цикл: i = 2
//   Внутренний цикл: j = 1
//   Внутренний цикл: j = 2
//   Внутренний цикл: j = 3
// Внешний цикл: i = 3
//   Внутренний цикл: j = 1
//   Внутренний цикл: j = 2
//   Внутренний цикл: j = 3
```

### Двумерный массив
```c
#include <stdio.h>

int main() {
    int matrix[3][3] = {
        {1, 2, 3},
        {4, 5, 6},
        {7, 8, 9}
    };

    // Проход по всем элементам
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            printf("%d ", matrix[i][j]);
        }
        printf("\n");
    }

    return 0;
}
```

### Диагональ матрицы
```c
#include <stdio.h>

int main() {
    int matrix[3][3] = {
        {1, 2, 3},
        {4, 5, 6},
        {7, 8, 9}
    };

    printf("Главная диагональ: ");
    for (int i = 0; i < 3; i++) {
        printf("%d ", matrix[i][i]);
    }
    printf("\n");  // 1 5 9

    return 0;
}
```

### Sum всех элементов матрицы
```c
#include <stdio.h>

int main() {
    int matrix[3][3] = {
        {1, 2, 3},
        {4, 5, 6},
        {7, 8, 9}
    };

    int sum = 0;
    for (int i = 0; i < 3; i++) {
        for (int j = 0; j < 3; j++) {
            sum += matrix[i][j];
        }
    }

    printf("Сумма всех элементов: %d\n", sum);  // 45
    return 0;
}
```

## 9. ОПТИМИЗАЦИЯ ЦИКЛОВ

### Уменьшение операций в цикле
```c
// ❌ МЕДЛЕННО: вычисляем длину каждую итерацию
for (int i = 0; i < strlen(str); i++) {
    printf("%c", str[i]);
}

// ✅ БЫСТРО: вычисляем длину один раз
int len = strlen(str);
for (int i = 0; i < len; i++) {
    printf("%c", str[i]);
}
```

### Минимизация вложенности
```c
// ❌ МЕДЛЕННО: три уровня вложенности
for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
        for (int k = 0; k < p; k++) {
            // Много вычислений
        }
    }
}

// ✅ БЫСТРО: если возможно, сложность O(n + m + p)
```

### Кэширование значений
```c
// ❌ Обращаемся к массиву каждый раз
int sum = 0;
for (int i = 0; i < 1000; i++) {
    sum += data[i];  // Доступ в память каждый раз
}

// ✅ Используем локальную переменную
int sum = 0;
int value;
for (int i = 0; i < 1000; i++) {
    value = data[i];  // Более кэшируемо
    sum += value;
}
```

## 10. СПЕЦИАЛЬНЫЕ ЦИКЛЫ

### Цикл по строке
```c
#include <stdio.h>
#include <string.h>

int main() {
    char str[] = "Hello";

    // Вариант 1: через индекс
    for (int i = 0; str[i] != '\0'; i++) {
        printf("%c ", str[i]);
    }
    printf("\n");

    // Вариант 2: через длину
    int len = strlen(str);
    for (int i = 0; i < len; i++) {
        printf("%c ", str[i]);
    }
    printf("\n");

    return 0;
}
```

### Бинарный поиск (не цикл, но важен)
```c
#include <stdio.h>

int binarySearch(int arr[], int n, int target) {
    int left = 0, right = n - 1;

    while (left <= right) {
        int mid = left + (right - left) / 2;

        if (arr[mid] == target) {
            return mid;
        } else if (arr[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }

    return -1;
}
```

## КЛЮЧЕВЫЕ МОМЕНТЫ

✅ Используйте for когда известно количество итераций
✅ Используйте while когда условие выхода неизвестно
✅ Используйте do...while когда тело должно выполниться минимум один раз
✅ ВСЕГДА проверяйте условие выхода (избегайте бесконечных циклов)
✅ Используйте break для выхода из цикла
✅ Используйте continue для пропуска текущей итерации
✅ Проверяйте границы массива (off-by-one ошибки)
✅ Не забывайте обновлять счётчик в while циклах
✅ Оптимизируйте вложенные циклы
✅ Кэшируйте значения, которые часто используются
✅ Избегайте изменения счётчика внутри цикла (в for)
✅ Документируйте сложные условия цикла
✅ Предпочитайте for for когда известна количество итераций
✅ Уменьшайте сложность циклов когда возможно
✅ Тестируйте граничные случаи (n=0, n=1, очень большие n)
