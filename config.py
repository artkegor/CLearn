import os
from dotenv import load_dotenv
from telebot.handler_backends import State, StatesGroup

# Load environment variables from a .env file if it exists
load_dotenv()


# Configuration class to hold all settings
class Config:
    # Telegram Bot Configuration
    BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN', 'your-default-telegram-bot-token')
    ADMIN_USER_ID = int(os.getenv('ADMIN_USER_ID', '123456789'))
    FEEDBACK_CHAT_ID = int(os.getenv('FEEDBACK_CHAT_ID', '987654321'))
    BOT_ID = int(os.getenv('BOT_ID', '123456789'))

    # Database Configuration
    MONGO_URI = os.getenv('MONGO_URI', 'your-default-mongo-uri')

    # API Configuration
    DEEPSEEK_API_KEY = os.getenv("DEEPSEEK_API_KEY", "your-api-key-here")
    DEEPSEEK_MODEL = "deepseek-chat"
    DEEPSEEK_BASE_URL = "https://api.deepseek.com/v1/chat/completions"
    DEEPSEEK_TEMPERATURE = 0.7
    DEEPSEEK_MAX_TOKENS = 4096

    # Bot states for managing conversation flow
    class BotStates(StatesGroup):
        WAITING_FOR_FEEDBACK = State()
        WAITING_FOR_TASK_SOLUTION = State()

    # Other configuration settings
    C_TOPICS = {
        "1": "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö",
        "2": "–£—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã",
        "3": "–¶–∏–∫–ª—ã",
        "4": "–ú–∞—Å—Å–∏–≤—ã",
        "5": "–§—É–Ω–∫—Ü–∏–∏",
        "6": "–£–∫–∞–∑–∞—Ç–µ–ª–∏",
        "7": "–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö",
        "8": "–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏",
        "9": "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å",
        "10": "–ü—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä"
    }

    TASK_DIFFICULTIES = {
        "1": "üü¢ –õ–µ–≥–∫–∏–π",
        "2": "üü° –°—Ä–µ–¥–Ω–∏–π",
        "3": "üî¥ –°–ª–æ–∂–Ω—ã–π"
    }

    GENERATOR_SYSTEM_PROMPT = """
    –¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—á–µ–±–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ C.

    –ì–õ–ê–í–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´:
    1. –ö–ê–ñ–î–û–ï –∑–∞–¥–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å—Ç—Ä–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –í–´–ë–†–ê–ù–ù–û–ô –¢–ï–ú–ï
    2. –ù–ï–õ–¨–ó–Ø —Å–º–µ—à–∏–≤–∞—Ç—å —Ç–µ–º—ã –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö —Ç–µ–º
    3. –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –†–ê–ó–†–ï–®–ï–ù–ù–´–• –¥–ª—è —Ç–µ–º—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
    4. –ó–∞–¥–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –†–ê–ó–ù–û–û–ë–†–ê–ó–ù–´–ú–ò –ø–æ —Ç–∏–ø–∞–º –∏ –ø–æ–¥—Ö–æ–¥–∞–º
    5. –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±–µ—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Ñ–∏–∑–∏–∫–∞, –∫—É—Ö–Ω—è, —Å–ø–æ—Ä—Ç, —Ñ–∏–Ω–∞–Ω—Å—ã, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è).
    6. –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±–µ—Ä–∏ —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö (int, float, char).
    7. –°–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–±–µ—Ä–∏ —Ç–∏–ø –∑–∞–¥–∞—á–∏ (–≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è, –ª–æ–≥–∏—á–µ—Å–∫–∞—è, –Ω–∞ –æ—Ç–ª–∞–¥–∫—É, –Ω–∞ –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞, –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–∞—è).
    8. –ö–∞–∂–¥—ã–π —Ä–∞–∑ —Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –∑–∞–¥–∞—á—É —Ç–∞–∫, –∫–∞–∫ –±—É–¥—Ç–æ –æ–Ω–∞ –≤–ø–µ—Ä–≤—ã–µ –ø—Ä–∏–¥—É–º–∞–Ω–∞, —Å –¥—Ä—É–≥–∏–º —Å—é–∂–µ—Ç–æ–º –∏ —á–∏—Å–ª–æ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.
    9. –ù–µ –Ω—É–∂–Ω–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–º—É, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –∫–æ–Ω—Ç–µ–∫—Å—Ç, —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏ —Ç–∏–ø –∑–∞–¥–∞—á–∏.
    10. –ù–µ –Ω—É–∂–Ω–æ –∫–∞–ø—Å–æ–º –∏ –∑–≤–µ–∑–¥–æ—á–∫–∞–º–∏ –≤—ã–¥–µ–ª—è—Ç—å –≤—Ö–æ–¥–Ω—ã–µ/–≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –¥—Ä—É–≥–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.

    –°–¢–†–£–ö–¢–£–†–ê –ó–ê–î–ê–ù–ò–ô (–º–æ–∂–µ—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è):
    - –ß–µ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
    - –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö/–≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
    - –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è)
    - –ü–æ–¥—Å–∫–∞–∑–∫–∏ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)

    –¢–ò–ü–´ –ó–ê–î–ê–ù–ò–ô –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è:
    ‚Ä¢ –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ (—Ñ–æ—Ä–º—É–ª—ã, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è)
    ‚Ä¢ –õ–æ–≥–∏—á–µ—Å–∫–∏–µ (—É—Å–ª–æ–≤–∏—è, –≤—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
    ‚Ä¢ –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)
    ‚Ä¢ –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏–µ (–ø—Ä–æ—Å—Ç—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã)
    ‚Ä¢ –û—Ç–ª–∞–¥–∫–∞ (–Ω–∞–π—Ç–∏ –æ—à–∏–±–∫—É –≤ –∫–æ–¥–µ)
    ‚Ä¢ –ú–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
    ‚Ä¢ –ó–∞–¥–∞—á–∏ –Ω–∞ –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞

    –£–†–û–í–ù–ò –°–õ–û–ñ–ù–û–°–¢–ò:
    1-–ª–µ–≥–∫–∏–π: –ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–µ –∑–∞–¥–∞—á–∏, –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
    2-—Å—Ä–µ–¥–Ω–∏–π: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π —Ç–µ–º—ã
    3-—Å–ª–æ–∂–Ω—ã–π: –ù–µ–æ—á–µ–≤–∏–¥–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è, —Ä–∞–±–æ—Ç–∞ —Å edge cases

    –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û:
    –ï—Å–ª–∏ —Ç–µ–º–∞ "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö" ‚Üí –ó–ê–ü–†–ï–©–ï–ù–´ —Ü–∏–∫–ª—ã, —É—Å–ª–æ–≤–∏—è, –º–∞—Å—Å–∏–≤—ã
    –ï—Å–ª–∏ —Ç–µ–º–∞ "–£—Å–ª–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã" ‚Üí –ó–ê–ü–†–ï–©–ï–ù–´ —Ü–∏–∫–ª—ã, –º–∞—Å—Å–∏–≤—ã, —Ñ—É–Ω–∫—Ü–∏–∏
    –ï—Å–ª–∏ —Ç–µ–º–∞ "–¶–∏–∫–ª—ã" ‚Üí –ó–ê–ü–†–ï–©–ï–ù–´ –º–∞—Å—Å–∏–≤—ã, —Ñ—É–Ω–∫—Ü–∏–∏, —É–∫–∞–∑–∞—Ç–µ–ª–∏
    –∏ —Ç.–¥. - –∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑—É—á–∞–µ–º–æ–π —Ç–µ–º—ã!

    –°–õ–ï–î–ò –∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ–º —Ç–µ–º—ã –∏ –ù–ï –ü–ï–†–ï–ú–ï–®–ò–í–ê–ô –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ç–µ–º!
    """
